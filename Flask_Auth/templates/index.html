{% extends "base.html" %}

{% block body %}

<div class="container">
   
   <!-- Display flashed messages -->
   {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
         <div class="alert-messages">
            <ul>
               {% for category, message in messages %}
                  <li class="{{ category }}">{{ message }}</li>
               {% endfor %}
            </ul>
         </div>
      {% endif %}
   {% endwith %}
   
   <form id="auth-form" action="{{ url_for('login') }}" method="post">
      <input type="text" name="username" placeholder="Username" class="input-field" />
      <input type="password" name="password" placeholder="Password" class="input-field" />
      <input type="submit" value="Login" class="btn btn-login" onclick="setActionForm('login')" />
      <input type="submit" value="Register" class="btn btn-login" onclick="setActionForm('register')" />
      <input type="button" class="btn login-google" value="Login with Google" onclick="window.location.href = '{{ url_for('google_login') }}'"/>
   </form>
</div>

<script>
   function setActionForm(action) {
      let form = document.getElementById("auth-form");
      if (action === "login") {
         form.action = "{{ url_for('login') }}";
         form.method = "post";
         form.submit();
      } else if (action === "register") {
         form.action = "{{ url_for('register') }}";
         form.method = "post";
         form.submit();
      }
   }
</script>

{% endblock %}
